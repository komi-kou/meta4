# ğŸ“Š åºƒå‘Šãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ¬ãƒãƒ¼ãƒˆãƒ„ãƒ¼ãƒ«

GoMarble.aiã€Claude APIã€Chatworkã‚’é€£æºã•ã›ãŸè‡ªå‹•åºƒå‘Šãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆãƒ„ãƒ¼ãƒ«ã§ã™ã€‚

## âœ¨ æ©Ÿèƒ½

- ğŸ“ˆ **Meta/Facebook Ads ãƒ‡ãƒ¼ã‚¿è‡ªå‹•å–å¾—** - GoMarble MCPçµŒç”±
- ğŸ¤– **AIåˆ†æ** - Claude APIã«ã‚ˆã‚‹é«˜åº¦ãªãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åˆ†æ
- ğŸ’¬ **Chatworkè‡ªå‹•é€ä¿¡** - å®šæœŸãƒ¬ãƒãƒ¼ãƒˆã‚’æŒ‡å®šãƒ«ãƒ¼ãƒ ã«é…ä¿¡
- ğŸ“Š **ãƒ“ã‚¸ãƒ¥ã‚¢ãƒ«ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰** - Webãƒ–ãƒ©ã‚¦ã‚¶ã§ç¢ºèªå¯èƒ½
- ğŸ”„ **è‡ªå‹•åŒ–å¯¾å¿œ** - cronç­‰ã§ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«å®Ÿè¡Œå¯èƒ½

## ğŸ¯ å–å¾—ã§ãã‚‹æŒ‡æ¨™

### ä¸»è¦æŒ‡æ¨™
- åºƒå‘Šè²» (spend)
- ã‚¤ãƒ³ãƒ—ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ (impressions)
- ã‚¯ãƒªãƒƒã‚¯æ•° (clicks)
- CTR (Click Through Rate)
- CPC (Cost Per Click)
- CPM (Cost Per Mille)
- ãƒªãƒ¼ãƒ (reach)
- ãƒ•ãƒªãƒ¼ã‚¯ã‚¨ãƒ³ã‚·ãƒ¼ (frequency)
- ã‚³ãƒ³ãƒãƒ¼ã‚¸ãƒ§ãƒ³æ•° (conversions)
- CPA (Cost Per Acquisition)
- ROAS (Return On Ad Spend)

### ãƒ¬ãƒãƒ¼ãƒˆå†…å®¹
1. ã‚¢ã‚«ã‚¦ãƒ³ãƒˆå…¨ä½“ã‚µãƒãƒªãƒ¼
2. ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³åˆ¥ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ (Top 5)
3. åºƒå‘Šã‚»ãƒƒãƒˆåˆ¥åˆ†æ
4. ã‚¯ãƒªã‚¨ã‚¤ãƒ†ã‚£ãƒ–åˆ¥è©³ç´°åˆ†æ
5. æ—¥åˆ¥ãƒˆãƒ¬ãƒ³ãƒ‰ (éå»7æ—¥é–“)
6. å…·ä½“çš„ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³ææ¡ˆ
7. ç·åˆè©•ä¾¡ã¨æ¬¡é€±ã«å‘ã‘ãŸã‚¢ãƒ‰ãƒã‚¤ã‚¹

## ğŸ“‹ å¿…è¦ãªç’°å¢ƒ

### APIã‚­ãƒ¼
1. **GoMarble APIã‚­ãƒ¼**
   - https://apps.gomarble.ai ã§ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
   - ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ã‹ã‚‰APIã‚­ãƒ¼ã‚’ç”Ÿæˆ
   - Meta Adsã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æ¥ç¶š

2. **Chatwork APIãƒˆãƒ¼ã‚¯ãƒ³**
   - https://www.chatwork.com/service/packages/chatwork/subpackages/api/token.php
   - APIãƒˆãƒ¼ã‚¯ãƒ³ã‚’ç”Ÿæˆ
   - é€ä¿¡å…ˆãƒ«ãƒ¼ãƒ IDã‚’ç¢ºèªï¼ˆãƒ–ãƒ©ã‚¦ã‚¶ã®ã‚¢ãƒ‰ãƒ¬ã‚¹ãƒãƒ¼ã‹ã‚‰ï¼‰

3. **Claude APIã‚­ãƒ¼**
   - https://console.anthropic.com/
   - APIã‚­ãƒ¼ã‚’ç”Ÿæˆ

### ç’°å¢ƒå¤‰æ•°

`.env.local` ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆï¼š

```bash
# GoMarble API
GOMARBLE_API_KEY=your_gomarble_api_key_here

# Chatwork API
CHATWORK_API_TOKEN=your_chatwork_token_here
CHATWORK_ROOM_ID=your_room_id_here

# Claude API
ANTHROPIC_API_KEY=your_anthropic_api_key_here
```

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

### 1. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```bash
npm install
```

### 2. GoMarble MCP Serverã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# GoMarble MCP Serverã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g @gomarble/facebook-ads-mcp-server

# Meta Adsã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’æ¥ç¶š
# https://www.gomarble.ai/docs/facebook-ads-mcp-tools ã‚’å‚ç…§
```

### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š

```bash
cp .env.example .env.local
# .env.localã‚’ç·¨é›†ã—ã¦APIã‚­ãƒ¼ã‚’è¨­å®š
```

## ğŸ’» ä½¿ç”¨æ–¹æ³•

### Webãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ç¢ºèª

```bash
# é–‹ç™ºã‚µãƒ¼ãƒãƒ¼èµ·å‹•
npm run dev

# ãƒ–ãƒ©ã‚¦ã‚¶ã§é–‹ã
# http://localhost:3000/ad-report
```

### ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã§ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

```bash
# é€±æ¬¡ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
npm run generate-report -- --period=weekly --account-id=YOUR_AD_ACCOUNT_ID

# æ—¥æ¬¡ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
npm run generate-report -- --period=daily --account-id=YOUR_AD_ACCOUNT_ID --send-chatwork

# æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ã«ä¿å­˜ï¼‰
npm run generate-report -- --period=monthly --account-id=YOUR_AD_ACCOUNT_ID --save-file
```

### ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿

- `--period` : ãƒ¬ãƒãƒ¼ãƒˆæœŸé–“ (`daily`, `weekly`, `monthly`)
- `--account-id` : Metaåºƒå‘Šã‚¢ã‚«ã‚¦ãƒ³ãƒˆID
- `--send-chatwork` : Chatworkã«é€ä¿¡ã™ã‚‹
- `--save-file` : JSONãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ä¿å­˜

## â° å®šæœŸå®Ÿè¡Œã®è¨­å®š

### cronï¼ˆLinux/Macï¼‰

```bash
# crontabã‚’ç·¨é›†
crontab -e

# æ¯é€±æœˆæ›œæ—¥9æ™‚ã«å®Ÿè¡Œ
0 9 * * 1 cd /path/to/metadeta && npm run generate-report -- --period=weekly --account-id=123456789 --send-chatwork

# æ¯æ—¥æœ9æ™‚ã«å®Ÿè¡Œ
0 9 * * * cd /path/to/metadeta && npm run generate-report -- --period=daily --account-id=123456789 --send-chatwork
```

### GitHub Actions

```yaml
# .github/workflows/weekly-report.yml
name: Weekly Ad Report

on:
  schedule:
    - cron: '0 0 * * 1' # æ¯é€±æœˆæ›œæ—¥0æ™‚ï¼ˆUTCï¼‰

jobs:
  generate-report:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-node@v3
        with:
          node-version: '18'
      - run: npm install
      - run: npm run generate-report -- --period=weekly --account-id=${{ secrets.AD_ACCOUNT_ID }} --send-chatwork
        env:
          GOMARBLE_API_KEY: ${{ secrets.GOMARBLE_API_KEY }}
          CHATWORK_API_TOKEN: ${{ secrets.CHATWORK_API_TOKEN }}
          CHATWORK_ROOM_ID: ${{ secrets.CHATWORK_ROOM_ID }}
          ANTHROPIC_API_KEY: ${{ secrets.ANTHROPIC_API_KEY }}
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Meta Ads   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  GoMarble   â”‚ â† APIã‚­ãƒ¼ã§èªè¨¼
â”‚  MCP Server â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚ ãƒ‡ãƒ¼ã‚¿å–å¾—
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ãƒ¬ãƒãƒ¼ãƒˆ     â”‚
â”‚ ç”Ÿæˆã‚¹ã‚¯ãƒªãƒ—ãƒˆâ”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ†’ Claude API â† AIåˆ†æ
       â”‚
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Chatwork   â”‚ â† è‡ªå‹•é€ä¿¡
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- APIã‚­ãƒ¼ã¯ `.env.local` ã«ä¿å­˜ï¼ˆ`.gitignore`ã«å«ã‚ã‚‹ï¼‰
- æœ¬ç•ªç’°å¢ƒã§ã¯ç’°å¢ƒå¤‰æ•°ã‚’ä½¿ç”¨
- GoMarbleã¯ãƒˆãƒ¼ã‚¯ãƒ³ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ï¼ˆå¤–éƒ¨é€ä¿¡ãªã—ï¼‰
- Chatwork APIï¼šãƒ¬ãƒ¼ãƒˆåˆ¶é™ 300ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/5åˆ†

## ğŸ“ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### åˆ†æå†…å®¹ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

`lib/api/claude.ts` ã® `generateAnalysisPrompt` é–¢æ•°ã‚’ç·¨é›†ï¼š

```typescript
function generateAnalysisPrompt(request: AnalysisRequest): string {
  // ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
  return `ã‚ãªãŸã®æ¥­ç•Œç‰¹æœ‰ã®åˆ†æè¦³ç‚¹ã‚’è¿½åŠ ...`;
}
```

### Chatworkãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

`lib/api/chatwork.ts` ã® `formatAdReportForChatwork` é–¢æ•°ã‚’ç·¨é›†

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### GoMarbleæ¥ç¶šã‚¨ãƒ©ãƒ¼
```
Error: Cannot connect to GoMarble MCP Server
```
â†’ GoMarble MCP ServerãŒæ­£ã—ãã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
â†’ Meta Adsã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒæ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª

### Chatworké€ä¿¡ã‚¨ãƒ©ãƒ¼
```
Error: Chatwork API Error: 401
```
â†’ APIãƒˆãƒ¼ã‚¯ãƒ³ãŒæ­£ã—ã„ã‹ç¢ºèª
â†’ ãƒ«ãƒ¼ãƒ IDãŒæ­£ã—ã„ã‹ç¢ºèª

### Claude API ã‚¨ãƒ©ãƒ¼
```
Error: Claude API Error: 401
```
â†’ ANTHROPIC_API_KEYãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
â†’ APIã‚­ãƒ¼ãŒæœ‰åŠ¹ã‹ç¢ºèª

## ğŸ“š å‚è€ƒãƒªãƒ³ã‚¯

- [GoMarble Documentation](https://www.gomarble.ai/docs)
- [Chatwork API Documentation](https://download.chatwork.com/ChatWork_API_Documentation.pdf)
- [Anthropic Claude API](https://docs.anthropic.com/)
- [Meta Ads API](https://developers.facebook.com/docs/marketing-apis)

## ğŸ“„ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

## ğŸ¤ ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ã‚·ãƒ§ãƒ³

Issueã€Pull Requestã‚’æ­“è¿ã—ã¾ã™ï¼
